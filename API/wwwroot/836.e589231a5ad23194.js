"use strict";(self.webpackChunkShoeStore_client=self.webpackChunkShoeStore_client||[]).push([[836],{2836:(S,c,s)=>{s.r(c),s.d(c,{AuthModule:()=>Z});var f=s(4466),h=s(6895),b=s(5698),r=s(4006),t=s(4650),d=s(3899),p=s(4859),u=s(3546),m=s(4015);let M=(()=>{class o{constructor(n,e,a){this.fb=n,this.authService=e,this.cdr=a}ngOnInit(){this.profileForm=this.fb.group({email:[{value:null,disabled:!0}],userName:[{value:null,disabled:!0}],zipCode:[{value:null,disabled:!0}],currentPassword:[null,[r.kI.required]],newPassword:[null,[r.kI.required,this.validatePassword()]],confirmPassword:[null,[r.kI.required,this.matchValues("newPassword")]]})}ngAfterViewInit(){this.authService.currentUser$.pipe((0,b.q)(1)).subscribe(n=>{this.user=n,this.profileForm.patchValue({email:n?.email,userName:n?.userName,zipCode:n?.address.zipCode})})}validatePassword(){return n=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/.test(n.value)?null:{weakPassword:!0}}ngAfterViewChecked(){this.cdr.detectChanges()}matchValues(n){return e=>e?.value===e?.parent?.get(n)?.value?null:{isMatching:!0}}changePasswordSubmit(){this.authService.changePassword({currentPassword:this.profileForm.value.currentPassword,newPassword:this.profileForm.value.newPassword}).subscribe(n=>{n&&(this.profileForm.get("currentPassword")?.reset(),this.profileForm.get("newPassword")?.reset(),this.profileForm.get("confirmPassword")?.reset())})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(r.qu),t.Y36(d.e),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-profile"]],decls:30,vars:17,consts:[[1,"card-details"],[1,"card"],[1,"example-card"],[1,"boldtext"],[1,"details",3,"formGroup","ngSubmit"],["formControlName","email",3,"label"],["formControlName","zipCode",3,"label"],["formControlName","currentPassword","type","password",3,"label"],["formControlName","newPassword","type","password",3,"label"],["formControlName","confirmPassword","type","password",3,"label"],[1,"submit-btn"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(n,e){1&n&&(t.TgZ(0,"h2"),t._uU(1,"Profile Settings"),t.qZA(),t.TgZ(2,"div",0)(3,"div",1)(4,"mat-card",2)(5,"mat-card-header")(6,"mat-card-title"),t._uU(7),t.qZA(),t.TgZ(8,"mat-card-subtitle"),t._uU(9),t.qZA()(),t.TgZ(10,"mat-card-content")(11,"p"),t._uU(12,"Joined At "),t.TgZ(13,"span",3),t._uU(14),t.ALo(15,"date"),t.qZA()(),t._UZ(16,"hr"),t.TgZ(17,"p"),t._uU(18,"Lives in "),t.TgZ(19,"span",3),t._uU(20),t.qZA()()()()(),t.TgZ(21,"form",4),t.NdJ("ngSubmit",function(){return e.changePasswordSubmit()}),t._UZ(22,"app-text-input",5)(23,"app-text-input",6)(24,"app-text-input",7)(25,"app-text-input",8)(26,"app-text-input",9),t.TgZ(27,"div",10)(28,"button",11),t._uU(29,"Submit"),t.qZA()()()()),2&n&&(t.xp6(7),t.AsE("",null==e.user?null:e.user.firstName," ",null==e.user?null:e.user.lastName,""),t.xp6(2),t.hij("@",null==e.user?null:e.user.userName,""),t.xp6(5),t.Oqu(t.xi3(15,14,null==e.user?null:e.user.joinedAt,"dd/MM/yyyy")),t.xp6(6),t.lnq("",null==e.user||null==e.user.address?null:e.user.address.street,", ",null==e.user||null==e.user.address?null:e.user.address.city,", ",null==e.user||null==e.user.address?null:e.user.address.country,""),t.xp6(1),t.Q6J("formGroup",e.profileForm),t.xp6(1),t.Q6J("label","Email"),t.xp6(1),t.Q6J("label","Zip Code"),t.xp6(1),t.Q6J("label","Current Password"),t.xp6(1),t.Q6J("label","New Password"),t.xp6(1),t.Q6J("label","Confirm Password"),t.xp6(2),t.Q6J("disabled",!e.profileForm.valid))},dependencies:[p.lW,u.a8,u.dk,u.dn,u.n5,u.$j,m.t,r._Y,r.JJ,r.JL,r.sg,r.u,h.uU],styles:["h2[_ngcontent-%COMP%]{text-align:center;padding:15px 0}.card-details[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .boldtext[_ngcontent-%COMP%]{font-weight:700;font-size:15px}.card-details[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:20px 0}.card-details[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]     .mat-card-content{padding:0 15px}.card-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-wrap:wrap;align-items:center;gap:10px;margin-top:10px}.card-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{flex:0 0 100%}.card-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%;margin-left:auto;margin-right:auto;display:block}.card-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   app-text-input[_ngcontent-%COMP%]{flex:0 0 31%}"]}),o})();var v=s(5963),C=s(3900),P=s(9646),O=s(4004),w=s(262),l=s(3060),x=s(1543);const y=[{path:"login",component:(()=>{class o{constructor(n,e,a,g){this.fb=n,this.authService=e,this.activatedRoute=a,this.router=g,this.returnUrl="/"}ngOnInit(){this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/",this.loginForm=this.fb.group({email:[null,[r.kI.required]],password:[null,[r.kI.required]]})}loginSubmitted(){this.authService.login(this.loginForm.value).subscribe(()=>{this.router.navigateByUrl(this.returnUrl)})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(r.qu),t.Y36(d.e),t.Y36(l.gz),t.Y36(l.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:8,vars:2,consts:[[1,"login"],["appearance","fill",3,"formGroup","ngSubmit"],["formControlName","email","type","email","label","Email"],["formControlName","password","type","password","label","Password"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Login Now"),t.qZA(),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return e.loginSubmitted()}),t._UZ(4,"app-text-input",2)(5,"app-text-input",3),t.TgZ(6,"button",4),t._uU(7,"Submit"),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("formGroup",e.loginForm),t.xp6(3),t.Q6J("disabled",!e.loginForm.valid))},dependencies:[p.lW,m.t,r._Y,r.JJ,r.JL,r.sg,r.u],styles:[".login[_ngcontent-%COMP%]{padding-top:2%}.login[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;padding:20px 0}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{border:1px solid grey;box-shadow:0 1px 9px 2px #a9a9a9;padding:2% 12px 12px;display:flex;flex-direction:column;border-radius:15px;align-items:center;width:-moz-fit-content;width:fit-content;min-width:35%;margin-left:auto;margin-right:auto}@media screen and (max-width: 900px){.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{min-width:45%}}@media screen and (max-width: 650px){.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{min-width:65%}}"]}),o})()},{path:"register",component:(()=>{class o{constructor(n,e,a,g){this.fb=n,this.authService=e,this.activatedRoute=a,this.router=g,this.returnUrl="/products"}ngOnInit(){this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/",this.registerForm=this.fb.group({userDetails:this.fb.group({email:[null,[r.kI.required,r.kI.email],[this.emailAlreadyExists()]],password:[null,[r.kI.required,this.validatePassword()]],confirmpassword:[null,[r.kI.required,this.matchValues("password")]],firstName:[null,[r.kI.required]],lastName:[null,[r.kI.required]],userName:[null,[r.kI.required]]}),address:this.fb.group({street:[null,[r.kI.required]],city:[null,[r.kI.required]],country:[null,[r.kI.required]],zipCode:[null,[r.kI.required]]})})}matchValues(n){return e=>e?.value===e?.parent?.get(n)?.value?null:{isMatching:!0}}validatePassword(){return n=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/.test(n.value)?null:{weakPassword:!0}}emailAlreadyExists(){return n=>(0,v.H)(500).pipe((0,C.w)(()=>n.value?this.authService.emailExists(n.value).pipe((0,O.U)(e=>e?{emailExists:!0}:null)):(0,P.of)(null)),(0,w.K)(e=>(0,P.of)(null)))}registerSubmitted(){const n=this.registerForm.get("userDetails")?.value,e={...this.registerForm.get("address")?.value,firstName:this.registerForm.get("userDetails")?.value?.firstName,lastName:this.registerForm.get("userDetails")?.value?.lastName};this.authService.register(n).pipe((0,C.w)(()=>this.authService.insertOrUpdateAddress(e))).subscribe(()=>this.router.navigateByUrl(this.returnUrl))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(r.qu),t.Y36(d.e),t.Y36(l.gz),t.Y36(l.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-register"]],decls:18,vars:3,consts:[[1,"register"],["appearance","fill",3,"formGroup","ngSubmit"],["formGroupName","userDetails",1,"userdetails"],[1,"subform"],["formControlName","firstName","type","text","label","First Name"],["formControlName","lastName","type","text","label","Last Name"],["formControlName","email","type","email","label","Email"],["formControlName","password","type","password","label","Password"],["formControlName","confirmpassword","type","password","label","Confirm Password"],["formControlName","userName","type","text","label","Username"],[3,"formGroup"],[1,"button"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Register"),t.qZA(),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return e.registerSubmitted()}),t.TgZ(4,"div",2)(5,"h3"),t._uU(6,"User Info"),t.qZA(),t.TgZ(7,"div",3),t._UZ(8,"app-text-input",4)(9,"app-text-input",5)(10,"app-text-input",6)(11,"app-text-input",7)(12,"app-text-input",8)(13,"app-text-input",9),t.qZA()(),t._UZ(14,"app-address-form",10),t.TgZ(15,"div",11)(16,"button",12),t._uU(17,"Submit"),t.qZA()()()()),2&n&&(t.xp6(3),t.Q6J("formGroup",e.registerForm),t.xp6(11),t.Q6J("formGroup",e.registerForm),t.xp6(2),t.Q6J("disabled",!e.registerForm.valid))},dependencies:[p.lW,m.t,x.C,r._Y,r.JJ,r.JL,r.sg,r.u,r.x0],styles:[".register[_ngcontent-%COMP%]{padding-top:2% 1%}.register[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-top:0;padding-top:2%}.register[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .userdetails[_ngcontent-%COMP%]   .subform[_ngcontent-%COMP%], .register[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]   .subform[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:2%;align-items:flex-end;flex-wrap:wrap}.register[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .userdetails[_ngcontent-%COMP%]   .subform[_ngcontent-%COMP%]   app-text-input[_ngcontent-%COMP%], .register[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]   .subform[_ngcontent-%COMP%]   app-text-input[_ngcontent-%COMP%]{flex:0 0 31%}.register[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div.button[_ngcontent-%COMP%]{margin-top:14px}.register[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div.button[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:120px;margin-left:auto;margin-right:auto;display:block}"]}),o})()},{path:"profile",component:M},{path:"",redirectTo:"login",pathMatch:"full"},{path:"**",redirectTo:"login",pathMatch:"full"}];let N=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(y),l.Bz]}),o})(),Z=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.ez,N,f.m,f.m]}),o})()}}]);